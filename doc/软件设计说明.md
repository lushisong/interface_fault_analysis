# 接口故障机理分析原型系统软件设计说明

## 1. 引言

### 1.1 编写目的
本文档旨在按照通用软件工程标准模板，对接口故障机理分析原型系统的软件设计进行全面描述，为开发人员、测试人员及维护人员提供统一的技术依据。文档覆盖系统总体架构、模块设计、数据设计、界面设计、关键算法、非功能需求及测试策略等内容，确保系统演进过程中具备可追踪、可扩展的设计基线。

### 1.2 项目概述
接口故障机理分析原型系统是一套基于 PyQt5 的桌面应用，面向复杂系统的接口建模与故障分析。系统提供模块建模、接口建模、任务剖面管理、环境建模、故障树自动生成等能力，支持交互式图形化建模及JSON格式的项目持久化。【F:main.py†L11-L38】【F:src/core/project_manager.py†L28-L58】【F:src/core/fault_tree_generator.py†L31-L65】

### 1.3 读者对象
- 项目管理者：了解系统总体设计与模块边界。
- 开发人员：参考详细设计实现功能或进行二次开发。
- 测试人员：依据模块说明与接口契约制定测试用例。
- 运维与实施人员：理解部署需求与运行环境。

### 1.4 范围与约束
- 范围：桌面端原型，主要关注建模与分析逻辑，不包含大型分布式部署。
- 约束：依赖 PyQt5 框架，当前版本定位于单机应用；仿真与分析算法为原型实现，可根据需求进一步增强。

### 1.5 参考资料
- 《GB/T 8567-2006 计算机软件产品开发文件编制指南》
- 《IEEE Std 1016-2017 系统与软件设计描述》
- 项目源代码存储库

## 2. 术语与定义
- **模块（Module）**：系统组成单元，分为硬件、软件、算法等类型，用于建模系统部件。【F:src/models/module_model.py†L18-L78】
- **接口（Interface）**：模块间数据或控制交互通道，包含类型、方向、参数及失效模式定义。【F:src/models/interface_model.py†L23-L200】
- **任务剖面（Task Profile）**：描述任务目标、成功判据及运行条件的实体，是故障树生成的重要输入。【F:src/models/system_model.py†L41-L104】
- **环境模型（Environment Model）**：定义外部环境应力及其对模块的影响，用于仿真环境因素。【F:src/models/environment_model.py†L13-L200】
- **故障树（Fault Tree）**：任务或系统失效的层次化逻辑模型，由事件和逻辑门组成。【F:src/core/fault_tree_generator.py†L31-L194】

## 3. 系统总体描述

### 3.1 系统定位
系统面向复杂系统工程领域，提供接口级故障机理分析能力，通过图形化建模与自动生成故障树，辅助工程师进行风险识别与验证。

### 3.2 目标用户
- 系统工程师：建模系统结构、接口与任务。
- 安全工程师：构建故障树分析潜在失效。
- 研究人员：验证算法原型与环境影响。

### 3.3 假设与依赖
- 运行环境具备 Python 3.12 及 PyQt5 库。
- 用户具备基本的系统工程知识，能够理解模块、接口与故障树概念。
- 项目文件以 JSON 形式存储，可通过内置项目管理器进行读写。【F:src/core/project_manager.py†L35-L83】

### 3.4 系统环境
系统作为单机桌面应用运行，主要组件包括：
- GUI 层（PyQt5）：负责用户交互与可视化。【F:src/ui/main_window.py†L10-L120】
- 业务逻辑层：项目管理、故障树生成、仿真等核心逻辑。【F:src/core/project_manager.py†L15-L99】【F:src/core/fault_tree_generator.py†L16-L194】
- 数据模型层：模块、接口、任务、环境等数据结构及序列化逻辑。【F:src/models/system_model.py†L297-L420】

## 4. 总体架构设计

### 4.1 架构风格
系统采用分层架构：
1. **表示层**：由 `MainWindow` 及其面板构成，负责组织界面、触发业务操作。【F:src/ui/main_window.py†L31-L120】
2. **业务层**：包含 `ProjectManager`、`FaultTreeGenerator` 等服务类，协调数据模型与业务规则。【F:src/core/project_manager.py†L15-L99】【F:src/core/fault_tree_generator.py†L16-L194】
3. **数据层**：以模型类实现实体属性、行为、序列化与仿真逻辑。【F:src/models/system_model.py†L297-L420】【F:src/models/module_model.py†L43-L200】

### 4.2 模块分解
- **主程序**：启动 Qt 应用、装配主窗口。【F:main.py†L22-L38】
- **项目管理模块**：负责项目创建、保存、加载及状态维护。【F:src/core/project_manager.py†L15-L99】
- **故障树分析模块**：根据系统模型和任务剖面生成故障树结构及概率信息。【F:src/core/fault_tree_generator.py†L31-L194】
- **系统模型模块**：维护系统结构、模块、接口、连接、环境及任务数据，并提供仿真入口。【F:src/models/system_model.py†L297-L420】
- **模块建模模块**：定义模块属性、接口集合、参数与状态变量的管理逻辑。【F:src/models/module_model.py†L43-L200】
- **接口建模模块**：描述接口类型、失效模式、触发条件及状态历史。【F:src/models/interface_model.py†L23-L200】
- **环境建模模块**：定义环境类型、应力因子及对系统状态的影响方式。【F:src/models/environment_model.py†L13-L200】
- **用户界面模块**：提供主窗口、系统画布及各功能面板，用于交互建模与数据显示。【F:src/ui/main_window.py†L31-L120】【F:src/ui/system_canvas.py†L1-L200】

### 4.3 数据流与控制流
1. 用户通过主窗口选择建模模块，在系统画布上构建模块与接口。
2. `ProjectManager` 维护系统模型实例，并在用户操作后标记变更。【F:src/core/project_manager.py†L18-L33】
3. 用户触发仿真或故障树分析时，业务层读取当前系统、任务和环境数据，执行计算并返回结果。【F:src/models/system_model.py†L337-L372】【F:src/core/fault_tree_generator.py†L31-L194】
4. 结果通过界面组件呈现，并可序列化为 JSON 项目文件。【F:src/core/project_manager.py†L35-L83】

### 4.4 部署视图
- 单机部署：在 Windows/Linux 桌面运行 Python 解释器，安装依赖后启动主程序。
- 数据存储：项目文件保存在本地文件系统中，无额外数据库依赖。

## 5. 数据设计

### 5.1 数据模型概述
系统使用对象模型封装关键数据实体，并提供 `to_dict`/`from_dict` 方法实现 JSON 序列化：
- `SystemStructure`：集中管理模块、接口、连接、环境及任务集合，并记录画布视图信息。【F:src/models/system_model.py†L297-L420】
- `Module`：继承自 `BaseModel`，包含接口集合、参数、状态变量与自定义执行代码，可生成仿真输出。【F:src/models/module_model.py†L43-L168】
- `Interface` 及关联类：定义接口元数据、失效模式、触发条件、状态机逻辑及行为建模脚本。【F:src/models/interface_model.py†L403-L853】
- `EnvironmentModule` 与 `StressFactor`：描述环境类型、应力因子及对系统状态的影响方式。【F:src/models/environment_model.py†L45-L207】
- `TaskProfile` 与 `SuccessCriteria`：提供任务成功判据、初始条件和分析结果存储。【F:src/models/system_model.py†L19-L184】

### 5.2 接口建模数据设计
接口模型通过分层对象组合实现灵活建模：
- `InterfaceFailureMode` 聚合 `TriggerCondition`，支持阈值、事件、时间及概率等多种触发逻辑，可附加自定义 Python 代码，实现复杂失效触发策略。【F:src/models/interface_model.py†L33-L163】【F:src/models/interface_model.py†L200-L247】
- 状态机结构由 `InterfaceState`、`InterfaceTransition` 与 `InterfaceStateType` 组成，正常状态与多个故障状态之间通过带优先级的触发条件切换，并记录历史轨迹。【F:src/models/interface_model.py†L270-L393】【F:src/models/interface_model.py†L533-L627】
- `Interface.instantiate_from_template` 支持从模板克隆全部状态、转换及失效模式，实现接口建模的复用与实例化。【F:src/models/interface_model.py†L697-L751】

### 5.3 模块建模数据设计
- 模块枚举 `ModuleType`/`ModuleTemplate` 提供硬件、软件、算法等分类及典型模板类型，便于界面按模板快速创建模块实例。【F:src/models/module_model.py†L17-L64】
- 每个模块持有接口字典与参数、状态变量映射，`execute_python_code` 负责执行模块级 Python 建模脚本，支持行为自定义。【F:src/models/module_model.py†L70-L137】
- 模块在序列化时保留模板类型、图元位置尺寸、接口定义等信息，为系统结构建模与画布还原提供数据基础。【F:src/models/module_model.py†L118-L210】

### 5.4 系统结构建模数据设计
- `Connection` 记录模块连接的源/目标模块与接口点，支持连线几何控制点与使能状态，用于图形化建模中连线的逻辑判断与呈现。【F:src/models/system_model.py†L187-L232】
- `SystemStructure` 同时维护画布视图参数（尺寸、缩放、偏移）及当前任务剖面，保证系统建模状态与 UI 同步。【F:src/models/system_model.py†L297-L420】

### 5.5 任务剖面与环境建模数据设计
- `TaskProfile` 聚合多个 `SuccessCriteria` 并跟踪分析结果字段，为任务剖面表格化编辑与结果持久化提供结构化支撑。【F:src/models/system_model.py†L33-L184】
- `EnvironmentModule` 与 `StressFactor` 描述环境库图元、应力参数、概率分布及时间剖面，并可指定受影响模块，支撑环境应力配置与故障触发仿真。【F:src/models/environment_model.py†L45-L207】

### 5.6 持久化设计
`ProjectManager` 在保存项目时，将 `SystemStructure` 序列化为 JSON 文件，目录不存在时自动创建；加载时解析 JSON 并重建对象实例，实现项目持久化。【F:src/core/project_manager.py†L35-L80】

### 5.7 数据一致性策略
- 模块、接口、连接均以唯一 ID 作为键，`SystemStructure` 在添加/删除时同步维护关联集合，确保引用一致性。【F:src/models/system_model.py†L309-L362】
- 删除模块时自动移除相关连接，避免悬挂引用。【F:src/models/system_model.py†L314-L330】
- 加载项目时根据 `module_type` 选择具体模块类，保证模块行为正确恢复。【F:src/models/system_model.py†L361-L396】

## 6. 接口设计

### 6.1 用户界面
- **主窗口**：包含菜单栏、工具栏、状态栏及多个标签页面板，提供项目操作、建模与分析入口。【F:src/ui/main_window.py†L31-L120】
- **系统画布**：支持模块拖拽、接口可视化、连线操作及模块配置对话框，模拟图形化建模体验。【F:src/ui/system_canvas.py†L1-L200】
- **功能面板**：模块、接口、任务剖面、环境和故障树面板通过 `set_project_manager` 与业务层交互，保证数据一致。

### 6.2 外部接口
- 文件接口：通过 JSON 项目文件与外部系统交换数据，遵循 `SystemStructure` 序列化格式。【F:src/core/project_manager.py†L51-L77】【F:src/models/system_model.py†L369-L420】
- Python 扩展接口：模块、环境和接口均支持嵌入自定义 Python 代码，用于原型快速扩展算法或应力计算。【F:src/models/module_model.py†L71-L114】【F:src/models/environment_model.py†L136-L199】【F:src/models/interface_model.py†L61-L120】

### 6.3 内部接口
- 业务层与模型层通过对象引用进行交互，`ProjectManager` 公开 `set_current_system`、`get_current_system` 等接口供界面层调用。【F:src/core/project_manager.py†L23-L99】
- 故障树生成器接收 `SystemStructure` 与 `TaskProfile` 实例，输出 `FaultTree` 对象供 UI 展示或进一步分析。【F:src/core/fault_tree_generator.py†L31-L194】

## 7. 详细设计

### 7.1 主程序流程
1. `main()` 函数初始化 `QApplication`，设置应用名称、版本及高 DPI 属性。【F:main.py†L22-L33】
2. 创建并展示 `MainWindow` 实例，进入事件循环。【F:main.py†L33-L38】

### 7.2 ProjectManager 类
- 维护当前系统实例、文件路径与修改标记。
- 提供创建新项目、保存、另存与加载等方法；保存和加载均处理 JSON 文件并更新状态。【F:src/core/project_manager.py†L15-L83】
- 提供状态查询接口 `has_unsaved_changes`、`get_current_system` 等，供 UI 判断保存提示。【F:src/core/project_manager.py†L85-L99】

### 7.3 SystemStructure 类
- 管理模块、接口、连接、环境模型与任务剖面的增删查，并维护画布视图参数。【F:src/models/system_model.py†L297-L356】
- 支持系统仿真：遍历模块执行自定义代码，应用环境应力后返回系统状态，用于任务评估与故障树分析输入。【F:src/models/system_model.py†L337-L372】
- 实现 `to_dict`/`from_dict` 序列化，自动恢复具体模块、接口、连接及环境对象。【F:src/models/system_model.py†L372-L420】

### 7.4 Module 类
- 扩展自 `BaseModel`，定义模块类型、几何信息、接口集合、参数、状态变量和 Python 代码执行能力。【F:src/models/module_model.py†L43-L131】
- 支持接口兼容层：`add_connection_point` 将旧版连接点转换为新接口对象，便于迁移。【F:src/models/module_model.py†L81-L128】
- `execute_python_code` 方法在受控环境中运行模块脚本，返回输出结果。【F:src/models/module_model.py†L105-L129】

### 7.5 Interface 模型
- 枚举接口类型、硬件子类型及失效模式，支持触发条件评估与失效模式管理。【F:src/models/interface_model.py†L23-L200】
- `TriggerCondition.evaluate` 基于阈值、事件、时间或概率逻辑判断是否触发，支持自定义代码扩展，便于构建复杂失效场景。【F:src/models/interface_model.py†L61-L163】

### 7.6 Environment 模型
- `EnvironmentModule` 组合多个 `StressFactor`，支持多种分布与时间剖面生成应力值，并对受影响模块状态进行修改。【F:src/models/environment_model.py†L45-L200】
- 支持执行自定义 Python 代码以模拟复杂环境作用。

### 7.7 FaultTreeGenerator 类
- 根据任务成功判据或系统结构递归分解故障原因，生成事件与逻辑门树结构。【F:src/core/fault_tree_generator.py†L75-L194】
- 支持配置接口失效、模块失效与环境影响的包含策略，并设置顶事件信息与任务执行时间。【F:src/core/fault_tree_generator.py†L23-L73】【F:src/core/fault_tree_generator.py†L148-L173】

### 7.8 图形化建模组件
- `SystemCanvas` 提供模块图形项、接口图形项及配置对话框，支持拖拽移动、连线与交互提示，提升建模效率。【F:src/ui/system_canvas.py†L1-L200】
- 模块图形项根据模块类型设置不同颜色和交互行为。【F:src/ui/system_canvas.py†L166-L199】

### 7.9 接口建模子系统
- **Python 代码建模**：接口对象维护 `python_code` 属性，`simulate_interface` 在状态机输出后执行脚本，可依据输入与参数动态调整行为。【F:src/models/interface_model.py†L670-L695】
- **状态机逻辑**：接口默认提供正常状态，可新增多个故障状态并通过 `InterfaceTransition` 关联触发条件，`step_state_machine` 依据上下文执行状态跳转并记录历史。【F:src/models/interface_model.py†L438-L627】
- **失效模式触发**：失效模式与状态机自动同步，触发条件支持阈值、事件、时间、概率及自定义逻辑，满足多样化故障触发需求。【F:src/models/interface_model.py†L33-L163】【F:src/models/interface_model.py†L533-L667】
- **接口方向管理**：`InterfaceDirection` 显式区分输入、输出、双向方向，模块在加载旧版连接点时根据方向映射，为界面显示和连线规则提供依据。【F:src/models/interface_model.py†L396-L403】【F:src/models/module_model.py†L89-L118】
- **模板复用**：`instantiate_from_template` 深度克隆状态、转换和失效模式，保证实例化接口与模板逻辑隔离但行为一致，便于模块建模复用。【F:src/models/interface_model.py†L697-L751】

### 7.10 模块建模子系统
- **接口关联**：模块内部接口集合与 `connection_points` 兼容，为每个接口绑定方向、数据格式及关联变量，支持在模块视图中快速配置模块与接口关系。【F:src/models/module_model.py†L70-L128】
- **功能行为建模**：模块提供 `python_code` 字段与 `execute_python_code` 方法，将内部逻辑封装为可执行脚本；脚本可读取参数、状态变量并返回输出，形成“模块逻辑 + 接口交互”的行为建模模式。【F:src/models/module_model.py†L70-L137】
- **模板支持**：内置硬件、软件、算法等多类模板枚举，界面可基于模板创建模块骨架；序列化保留模板信息和可视化参数，便于复制与批量建模。【F:src/models/module_model.py†L17-L118】【F:src/models/module_model.py†L188-L240】
- **接口模板复用**：模块在实例化模板接口时调用接口的复用逻辑，编辑界面与接口建模界面保持一致，实现统一的建模体验。【F:src/models/module_model.py†L89-L128】【F:src/models/interface_model.py†L697-L751】

### 7.11 系统结构建模子系统
- **模块实例化**：`SystemStructure` 管理模块字典，支持添加、删除及序列化，多实例共存且保存画布位置尺寸，用于类似 Simulink 的图形化布局。【F:src/models/system_model.py†L297-L356】
- **连线逻辑**：`Connection` 结构记录源/目标模块与接口 ID，系统在删除模块时联动清理关联连线，保证连线逻辑判定安全。【F:src/models/system_model.py†L187-L232】【F:src/models/system_model.py†L309-L330】
- **数据传递实现**：模块执行 Python 代码生成输出，环境模块再对系统状态施加应力，形成共享变量式的数据传递机制。【F:src/models/system_model.py†L337-L368】
- **参数配置**：系统结构序列化保存模块参数、连接、环境、任务等配置，为界面加载后恢复建模状态提供依据。【F:src/models/system_model.py†L369-L420】

### 7.12 任务剖面建模子系统
- **可编辑表格**：`TaskProfile` 聚合多个成功判据并保存初始条件、环境条件、期望输出等字段，对应界面中的表格化配置需求。【F:src/models/system_model.py†L41-L184】
- **成功判据**：`SuccessCriteria` 支持阈值、范围、布尔及自定义脚本判定，可关联具体模块输出参数，形成任务成功约束。【F:src/models/system_model.py†L19-L120】
- **多剖面管理**：`SystemStructure` 维护任务剖面集合与当前选中 ID，支持在分析前选择特定剖面并切换管理。【F:src/models/system_model.py†L297-L356】
- **结果持久化**：剖面对象内置 `fault_tree_analysis_results` 与 `analysis_completed` 标记，便于保存历史分析结果并在界面中直接查看。【F:src/models/system_model.py†L121-L184】

### 7.13 环境与故障触发设计
- **环境模块库**：`EnvironmentModule` 以图形化节点形式管理环境类型、参数、颜色及位置，可拖入画布配置环境场景。【F:src/models/environment_model.py†L128-L225】
- **应力建模**：`StressFactor` 提供分布、时间剖面、概率参数等设定，`generate_stress_value` 根据任务时间生成应力值，实现概率触发与时间触发机制的底层支持。【F:src/models/environment_model.py†L45-L125】
- **故障触发集成**：环境应力通过 `apply_environment_stress` 和接口触发条件中的环境上下文影响接口状态机，实现环境参数驱动的故障概率触发；直接故障注入可通过修改接口状态或将接口切换到指定失效模式完成。【F:src/models/environment_model.py†L161-L207】【F:src/models/interface_model.py†L533-L695】
- **任务阶段结合**：任务剖面可通过持续时间和成功判据定义任务阶段，系统仿真结果与故障树分析会参考剖面参数计算成功率，为蒙特卡洛仿真与概率计算奠定结构基础。【F:src/models/system_model.py†L41-L184】【F:src/models/system_model.py†L337-L368】

### 7.14 故障树分析子系统
- **自动绘制**：`FaultTreeGenerator.generate_fault_tree` 基于当前系统与任务剖面生成故障树，自动创建顶事件与结构化分解。【F:src/core/fault_tree_generator.py†L20-L88】
- **定性分析**：生成器将成功判据与模块失效映射为事件和逻辑门，支持区分接口失效、模块失效与环境影响路径，用于识别关键路径。【F:src/core/fault_tree_generator.py†L89-L194】
- **定量分析**：事件结构保留失效率、任务执行时间等字段，并与任务剖面的持续时间结合，为后续蒙特卡洛仿真、概率计算和灵敏度分析提供数据支撑。【F:src/core/fault_tree_generator.py†L40-L88】【F:src/core/fault_tree_generator.py†L137-L194】

## 8. 关键业务流程

### 8.1 项目生命周期
1. 用户在主窗口选择“新建项目”，`ProjectManager` 创建新的 `SystemStructure` 并设置为当前项目。【F:src/core/project_manager.py†L28-L33】
2. 用户通过各面板编辑模块、接口、任务与环境，`ProjectManager` 根据操作标记项目已修改。【F:src/core/project_manager.py†L23-L33】
3. 保存时调用 `save_project_as` 或 `save_project` 将模型写入 JSON 文件。【F:src/core/project_manager.py†L35-L58】
4. 打开项目时调用 `load_project` 解析 JSON 并恢复系统状态。【F:src/core/project_manager.py†L64-L80】

### 8.2 故障树生成
1. 用户选择任务剖面并触发故障树分析。
2. `FaultTreeGenerator` 初始化配置、创建顶事件并根据成功判据或系统结构生成分层事件。【F:src/core/fault_tree_generator.py†L31-L140】
3. 模块失效事件可组合内部失效、接口失效和环境影响，形成 OR 门结构。【F:src/core/fault_tree_generator.py†L148-L194】
4. 生成的故障树返回界面层展示或用于进一步分析。

### 8.3 系统仿真流程
1. `SystemStructure.simulate_system` 遍历模块执行脚本，收集输出状态。【F:src/models/system_model.py†L337-L352】
2. 环境模型应用应力，修改受影响模块状态，形成最终系统状态。【F:src/models/system_model.py†L352-L368】
3. 任务剖面可基于系统状态评估成功率，用于故障树概率计算与任务判定。【F:src/models/system_model.py†L65-L104】

### 8.4 接口建模流程
1. 在接口建模界面创建或选中接口，配置方向、协议、数据格式、带宽等元数据。【F:src/models/interface_model.py†L403-L783】
2. 通过添加 `InterfaceState`、`InterfaceTransition` 和 `TriggerCondition` 定义正常与故障状态的状态机，并编写必要的 Python 触发脚本。【F:src/models/interface_model.py†L438-L627】
3. 在失效模式面板中添加典型失效模式或自定义失效模式，将触发条件映射到故障状态，实现失效逻辑闭环。【F:src/models/interface_model.py†L200-L560】
4. 如需复用，保存为模板并通过 `instantiate_from_template` 在其他模块中实例化，实现接口建模的模板化复用。【F:src/models/interface_model.py†L697-L751】

### 8.5 模块建模流程
1. 从模块库选择模板或空白模块，配置模块类型与基础属性。【F:src/models/module_model.py†L17-L118】
2. 关联所需接口，设置接口与内部变量映射，必要时将旧版连接点转换为新接口，保持兼容。【F:src/models/module_model.py†L89-L128】
3. 在模块脚本编辑器中编写 Python 代码，描述模块内部逻辑与输入输出关系。【F:src/models/module_model.py†L70-L137】
4. 保存模块后，`SystemStructure` 将模块加入系统模型，供结构建模与仿真使用。【F:src/models/system_model.py†L297-L320】

### 8.6 系统结构建模流程
1. 在图形化画布上拖入模块实例，设置位置、尺寸与图标，实现系统拓扑布局。【F:src/models/module_model.py†L70-L118】【F:src/models/system_model.py†L297-L314】
2. 根据接口方向规则连接模块，`Connection` 记录源/目标接口信息并在删除模块时自动维护一致性。【F:src/models/module_model.py†L89-L118】【F:src/models/system_model.py†L187-L330】
3. 若需要环境作用或任务剖面，分别添加环境模块与任务剖面配置，形成完整系统模型输入。【F:src/models/environment_model.py†L128-L225】【F:src/models/system_model.py†L41-L184】

### 8.7 任务剖面与环境建模流程
1. 在任务剖面面板中以表格形式添加多个成功判据，配置目标模块、参数、阈值及持续时间。【F:src/models/system_model.py†L41-L184】
2. 定义任务阶段的初始条件与期望输出，保存后系统会在分析完成时写入 `fault_tree_analysis_results` 字段。【F:src/models/system_model.py†L121-L184】
3. 在环境建模面板选择环境模块模板，配置应力因子分布、时间剖面及受影响模块，必要时编写环境脚本。【F:src/models/environment_model.py†L45-L207】
4. 将任务剖面与环境配置结合，通过仿真与故障树分析评估各阶段成功率与关键故障路径。【F:src/models/system_model.py†L337-L368】【F:src/core/fault_tree_generator.py†L31-L194】

## 9. 非功能设计

### 9.1 性能
- 由于为桌面原型，系统主要处理单机数据，性能瓶颈集中在故障树生成与仿真脚本执行。可通过限制故障树最大深度与使用轻量脚本确保响应速度。【F:src/core/fault_tree_generator.py†L23-L194】

### 9.2 可用性
- GUI 提供标签页组织功能区，并通过图形化画布和对话框降低学习成本。【F:src/ui/main_window.py†L31-L120】【F:src/ui/system_canvas.py†L27-L200】

### 9.3 可扩展性
- 模块、接口、环境均支持自定义 Python 代码扩展行为；故障树生成器通过配置项控制分析范围，便于后续扩展算法。【F:src/models/module_model.py†L105-L129】【F:src/models/environment_model.py†L191-L199】【F:src/core/fault_tree_generator.py†L23-L194】

### 9.4 可维护性
- 所有数据模型均实现序列化方法，便于调试与持久化；项目管理器集中处理文件操作，降低界面层复杂度。【F:src/models/system_model.py†L372-L420】【F:src/core/project_manager.py†L35-L83】

### 9.5 安全性
- 作为离线原型，主要安全风险在于执行用户提供的 Python 脚本。建议在实际部署时增加沙箱或脚本校验机制。

## 10. 测试设计

### 10.1 单元测试建议
- 为 `ProjectManager` 编写保存/加载测试，验证 JSON 序列化正确性。
- 为 `SystemStructure` 的增删操作编写测试，确保关联关系维护正确。
- 为 `FaultTreeGenerator` 构造简单系统模型，验证生成故障树结构与配置项生效。

### 10.2 集成测试建议
- GUI 集成测试：模拟用户在画布上创建模块、接口并保存项目。
- 故障树分析流程：加载包含任务剖面的项目，触发分析，校验生成结果。

### 10.3 验收测试场景
- 用户能够完成从新建项目、建模、仿真到故障树分析的全流程操作，并成功保存/加载项目。

## 11. 配置与部署

### 11.1 软件环境
- Python 3.12 及以上版本。
- 必需依赖：PyQt5、项目自带模块。

### 11.2 部署步骤
1. 安装 Python 及依赖库。
2. 克隆或下载项目代码。
3. 在项目根目录执行 `python main.py` 启动应用。

### 11.3 配置管理
- 项目配置主要通过 GUI 设置并保存至 JSON 文件；可结合版本管理系统追踪项目文件变更。

## 12. 附录

### 12.1 未来扩展建议
- 引入脚本执行沙箱，提升安全性。
- 增强故障树概率计算，支持蒙特卡洛仿真。
- 提供多语言界面与部署打包工具。

### 12.2 修订记录
- V1.0：首次编制软件设计说明。

