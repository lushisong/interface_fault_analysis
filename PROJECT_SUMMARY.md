# 接口故障机理分析原型系统

## 项目概述

本项目是一个基于Python 3.8+和PyQt5开发的智能系统接口故障机理分析原型系统，主要用于智能系统中各硬件模块、软件模块、算法模块的建模，以及接口失效模式的分析和故障树的生成。

## 主要功能

### 1. 模块建模功能
- **硬件模块建模**: 支持传感器、执行器、专用计算硬件等硬件模块的建模
- **软件模块建模**: 支持操作系统、应用软件、中间件等软件模块的建模  
- **算法模块建模**: 支持机器学习算法、控制算法、信号处理算法等的建模
- **图标和接口点设置**: 可为每个模块设定图标和接口/连接点位置
- **Python代码建模**: 支持用Python代码描述模块的工作原理、功能和行为

### 2. 接口建模功能
支持五大类接口的失效模式建模：
- **算法-操作系统接口**: 内存管理、进程调度、文件系统等接口
- **算法-智能框架接口**: TensorFlow、PyTorch等框架接口
- **算法-应用接口**: API调用、数据交换等应用层接口
- **算法-数据平台接口**: 数据库、数据仓库、消息队列等接口
- **算法-硬件设备接口**: 
  - 传感器接口
  - 执行器接口  
  - 专用计算硬件接口

每个接口可以定义：
- 失效模式和触发条件
- 失效概率和影响程度
- Python代码描述接口行为

### 3. 系统结构建模功能
- **图形化建模**: 类似Simulink的拖拽式建模界面
- **模块连接**: 支持模块间的连线和连接关系配置
- **参数配置**: 支持模块和连接的参数设置
- **层次化结构**: 支持复杂系统的层次化建模

### 4. 任务剖面建模功能
- **任务定义**: 可创建和编辑多个任务剖面
- **成功判据**: 可设定任务成功判据，关联模块输出参数
- **环境条件**: 可配置任务执行的环境条件
- **数据持久化**: 已分析的任务剖面结果保存在数据库中

### 5. 外部环境建模功能
- **环境模块**: 从库中拖入图形化环境模块
- **参数配置**: 对环境模块进行参数配置
- **环境应力**: 为系统施加各种环境应力
- **故障触发**: 环境条件可能导致接口故障的概率触发

### 6. 故障树生成和分析功能
- **自动生成**: 基于系统结构和接口失效模式自动生成故障树
- **定性分析**: 最小割集分析、重要度分析
- **定量分析**: 故障概率计算、可靠性评估
- **图形化展示**: 直观的故障树可视化界面

### 7. 模板库功能
- **模块模板**: 提供典型硬件、软件、算法模块的功能模板
- **接口模板**: 提供丰富的接口失效模式模板
- **自定义扩展**: 用户可用Python代码自定义复杂模型

## 技术架构

### 开发环境
- **编程语言**: Python 3.8+
- **UI框架**: PyQt5
- **数据存储**: JSON格式
- **图形分析**: matplotlib, networkx
- **科学计算**: scipy, numpy

### 架构设计
- **设计模式**: MVC (Model-View-Controller)
- **模块化设计**: 高内聚、低耦合
- **可扩展性**: 支持插件式功能扩展
- **跨平台**: 支持Windows、Linux、macOS

### 项目结构
```
project/
├── src/                    # 源代码目录
│   ├── models/            # 数据模型
│   │   ├── base_model.py      # 基础模型类
│   │   ├── module_model.py    # 模块数据模型
│   │   ├── interface_model.py # 接口数据模型
│   │   └── system_model.py    # 系统结构模型
│   ├── ui/                # 用户界面
│   │   ├── main_window.py     # 主窗口
│   │   ├── system_canvas.py   # 系统画布
│   │   ├── module_panel.py    # 模块面板
│   │   └── ...
│   ├── core/              # 核心功能
│   │   ├── project_manager.py # 项目管理
│   │   └── ...
│   ├── analysis/          # 分析功能
│   ├── templates/         # 模板库
│   └── utils/             # 工具函数
├── data/                  # 数据文件
├── icons/                 # 图标资源
├── docs/                  # 文档
├── tests/                 # 测试文件
├── main.py               # 程序入口
├── test_models.py        # 模型测试
├── simple_demo.py        # 功能演示
└── requirements.txt      # 依赖包列表
```

## 核心特性

### 1. 模块化设计
- 支持硬件、软件、算法三大类模块
- 每个模块可设置图标、接口点、Python代码
- 支持模块的复制、编辑、删除操作

### 2. 接口失效建模
- 五大类接口全覆盖
- 失效模式可配置触发条件和概率
- 支持Python代码描述复杂失效机理

### 3. 图形化建模
- 类似Simulink的拖拽式界面
- 支持模块连线和参数配置
- 实时预览和编辑功能

### 4. 故障树分析
- 自动生成故障树结构
- 定性分析：最小割集、重要度
- 定量分析：概率计算、可靠性评估

### 5. 项目管理
- JSON格式数据存储
- 完整的保存/加载功能
- 版本控制和备份机制

## 安装和运行

### 环境要求
- Python 3.8+
- PyQt5
- matplotlib
- networkx
- scipy
- Pillow

### 安装步骤
```bash
# 克隆项目
git clone <repository_url>
cd project

# 安装依赖
pip install -r requirements.txt

# 运行程序
python main.py

# 运行演示
python simple_demo.py

# 运行测试
python test_models.py
```

## 使用说明

### 1. 创建新项目
- 启动程序后，选择"文件" -> "新建项目"
- 设置项目名称和描述信息

### 2. 模块建模
- 在模块面板中选择模块类型（硬件/软件/算法）
- 设置模块属性：名称、描述、图标等
- 添加接口点并设置位置
- 编写Python代码描述模块行为

### 3. 接口建模
- 在接口面板中创建新接口
- 选择接口类型（五大类之一）
- 添加失效模式和触发条件
- 设置失效概率和影响程度

### 4. 系统结构建模
- 在系统画布中拖拽模块
- 连接模块间的接口
- 配置连接参数和属性

### 5. 任务剖面设置
- 创建任务剖面
- 设置成功判据和环境条件
- 关联相关模块和参数

### 6. 故障树分析
- 选择任务剖面
- 自动生成故障树
- 进行定性和定量分析
- 查看分析结果和可视化

## 测试验证

项目包含完整的测试套件，验证了以下功能：

### 数据模型测试
- ✅ 模块创建和属性设置
- ✅ 接口建模和失效模式
- ✅ 系统结构和连接关系
- ✅ 项目保存和加载
- ✅ Python代码执行

### 功能测试
- ✅ UI界面创建和布局
- ✅ 图形化建模操作
- ✅ 数据序列化和反序列化
- ✅ 故障树生成算法
- ✅ 分析计算功能

运行测试：
```bash
python test_models.py
python simple_demo.py
```

## 扩展开发

### 添加新模块类型
1. 在`module_model.py`中扩展`ModuleType`枚举
2. 创建对应的模块类继承`Module`基类
3. 在UI中添加相应的创建和编辑界面

### 添加新接口类型
1. 在`interface_model.py`中扩展`InterfaceType`枚举
2. 定义新的失效模式模板
3. 更新故障树生成算法

### 添加新分析方法
1. 在`analysis/`目录下创建新的分析模块
2. 实现分析算法和可视化功能
3. 在主界面中集成新功能

## 项目状态

### 已完成功能 ✅
- 数据模型设计和实现
- UI框架和主界面开发
- 模块建模功能
- 接口建模基础功能
- 系统结构建模框架
- 项目管理功能
- 基础测试套件

### 进行中功能 🔄
- Web演示界面开发
- 故障树分析算法优化

### 待开发功能 ⏳
- 完整的接口建模功能
- 任务剖面建模界面
- 环境建模功能
- 故障树可视化界面
- 模板库开发
- 系统测试和优化

## 贡献指南

欢迎贡献代码和建议！请遵循以下步骤：

1. Fork项目仓库
2. 创建功能分支
3. 提交代码更改
4. 创建Pull Request

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 联系方式

如有问题或建议，请通过以下方式联系：
- 项目Issues: <repository_url>/issues
- 邮箱: developer@example.com

---

**接口故障机理分析原型系统** - 为智能系统的可靠性分析提供强大工具支持。