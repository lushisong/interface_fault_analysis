# 任务剖面建模技术设计报告

## 1. 概述

任务剖面建模是系统可靠性分析的关键组成部分，它通过定义系统在特定任务场景下的执行流程和成功条件，为故障树分析和可靠性评估提供基础支撑。本模块采用层次化的数据模型和交互式用户界面，支持用户定义和管理复杂的任务场景，确保系统可靠性分析具有明确的评估标准。

## 2. 数据模型设计

任务剖面数据模型采用三层结构：任务剖面、任务阶段和成功判据。任务剖面作为顶层容器，包含多个任务阶段和成功判据；任务阶段描述任务的时间序列结构；成功判据定义系统运行的评估标准。

成功判据模型支持多种判据类型，包括模块输出参数、模块状态量、系统性能指标和自定义条件。每种判据类型对应不同的评估逻辑，通过比较操作符（等于、不等于、大于、小于、区间判断等）实现灵活的条件判断。自定义条件支持Python代码执行，为复杂评估逻辑提供扩展能力。

任务阶段模型采用时间驱动设计，每个阶段包含开始时间、持续时间和启用状态属性。阶段之间通过时间轴顺序排列，形成完整的任务时间线。阶段条件支持基于系统状态的动态判断，允许任务流程根据实际运行情况进行调整。

## 3. 用户界面设计

任务剖面面板采用模块化布局，左侧为任务剖面列表，右侧为多标签页编辑器。列表视图以树形结构展示所有已定义的任务剖面，支持新建、复制和删除操作。编辑器包含基本信息、成功判据、任务阶段和故障树生成四个功能区域。

成功判据标签页提供表格形式的判据管理界面，支持判据的增删改查和权重设置。任务阶段标签页以时间轴形式展示阶段信息，支持阶段的拖拽排序和时间调整。编辑对话框采用动态表单设计，根据判据类型显示相应的输入控件，确保数据输入的准确性和完整性。

## 4. 功能实现机制

任务剖面生成采用模板化创建机制，系统预置典型任务场景模板，用户可在模板基础上进行个性化调整。成功判据评估采用权重计分模型，系统遍历所有启用的判据，根据系统状态执行评估计算。评估结果包括总体成功状态和各判据详细结果。

任务阶段管理实现时间冲突检测机制，防止阶段时间重叠。阶段启用状态控制支持临时禁用特定阶段，便于进行场景对比分析。阶段条件评估与成功判据评估共享系统状态数据，确保评估结果的一致性。

## 5. 理论方法

任务成功性评估基于多判据加权评分模型。系统成功率计算公式为：

$success\_rate = \frac{\sum_{i=1}^{n} w_i \cdot s_i}{\sum_{i=1}^{n} w_i}$

其中$w_i$为第i个判据的权重，$s_i$为判据评估结果（成功为1，失败为0）。总体成功状态采用关键判据一票否决制，任一必需判据失败即判定任务失败。

任务时间建模采用离散阶段连续时间模型。任务总持续时间定义为各阶段持续时间之和，阶段切换基于绝对时间点。时间一致性验证确保阶段序列的时间逻辑正确性，避免时间冲突。

系统状态评估基于统一的键值对字典结构，支持模块参数、系统变量和自定义指标的集成访问。状态字典在任务执行过程中动态更新，为判据评估提供实时数据支持。

## 6. 集成与扩展

任务剖面模块与系统其他组件深度集成。环境建模模块提供任务执行的环境条件数据，故障树分析模块使用任务剖面作为可靠性分析的输入条件。项目管理系统负责任务剖面的版本管理和持久化存储。

扩展性设计支持新型判据和评估方法的引入。判据类型枚举和操作符枚举采用开放设计，便于新增类型的集成。自定义代码执行环境提供沙箱机制，确保代码执行的安全性。模板系统支持用户自定义模板的添加和管理，促进最佳实践的积累和复用。

## 7. 总结

任务剖面建模通过结构化的数据模型和直观的用户界面，实现了复杂任务场景的定义和管理。基于权重评分的成功性评估方法和离散阶段的时间建模，为系统可靠性分析提供了准确的任务上下文。模块化的设计和良好的扩展性，支持在不同工程领域的应用和定制。
